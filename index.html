<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="js/App.js"></script>
	<script type="text/javascript" src="js/Particle.js"></script>
	<script type="text/javascript" src="js/Force.js"></script>
	<script type="text/javascript">
		var app;
		window.addEventListener('load', function() {
			app = new App(document.getElementById('main'));
			app.loop(function() {
				if(app.getFPS() > 59) {
	        var x = Math.floor(Math.random() * App.const.MAX_X);
	        var y = Math.floor(Math.random() * App.const.MAX_Y);

	        app.addParticle(x, y);

	        app.particles[app.particles.length - 1].addForce(Force.random(0.1))
	      } else {
	      	// app.particles.shift();
	      }

	      for(var i = 0; i < app.particles.length; i++) {
	      	var p = app.particles[i];

	      	p.applyForces(app.delta);

	      	if(p.x < 0 || p.y < 0 || p.x > App.const.MAX_X || p.y > App.const.MAX_Y) {
	      		app.particles.splice(i, 1);
	      		delete p;
	      	}
	      }

        app.drawParticles();

        app.ctx.fillText(app.particles.length, 25, 50);
			});
		});
	</script>
</head>
<body>

<div id="wrapper">
	<div class="container">
		<canvas id="main" width="800" height="800"></canvas>
	</div>
</div>
</body>
</html>
            